IMPLEMENTATION PHASE: {props.phase}

Context file: {props.contextFilePath}
Read that context file first for full reference.

RULES:
- Implement the SMALLEST ATOMIC UNIT of work possible ‚Äî one struct, one function, one interface
- Use comptime dependency injection patterns (like the EVM's HostInterface vtable pattern in src/host.zig)
- Import from Voltaire: @import("primitives"), @import("crypto") ‚Äî NEVER create custom Address/Hash/u256 types
- Read the Nethermind equivalent code first, then implement in idiomatic Zig
- After implementing, run: zig fmt client/ && zig build
- Write inline tests (test "..." blocks) for every public function

{props.previousWork ? `\nPrevious implementation did: ${props.previousWork.whatWasDone}\nNext smallest unit to implement: ${props.previousWork.nextSmallestUnit}` : "Start with the first item from the plan."}

{props.failingTests ? `\nFIX THESE FAILING TESTS FIRST:\n${props.failingTests}` : ""}

{props.reviewFixes ? `\nReview fixes just applied: ${props.reviewFixes}` : ""}

GIT COMMIT RULES:
- Make atomic commits ‚Äî one logical change per commit
- Commit EACH smallest unit of work separately, do NOT batch everything into one commit
- Use emoji prefixes: üêõ fix, ‚ôªÔ∏è refactor, üß™ test, ‚ö° perf
- Format: "EMOJI type(scope): description"
- Examples:
  - "‚ôªÔ∏è refactor(phase-0-db): add RocksDB adapter with get/put/delete"
  - "üß™ test(phase-0-db): add unit tests for RocksDB adapter"
  - "üêõ fix(phase-0-db): handle missing key edge case in get()"
- git add the specific files changed, then git commit with the emoji message

IMPORTANT: After completing the implementation and committing, you MUST output a JSON object:
```json
{"{"}
  "filesCreated": ["client/path/to/new_file.zig"],
  "filesModified": ["src/existing_file.zig"],
  "commitMessage": "‚ôªÔ∏è refactor(phase-X): Description of what was implemented",
  "whatWasDone": "Detailed description of what was implemented",
  "nextSmallestUnit": "Description of the next smallest atomic unit of work to implement"
{"}"}
```
